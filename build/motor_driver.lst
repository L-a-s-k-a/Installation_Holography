ARM GAS  C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"motor_driver.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/motor_driver.c"
  20              		.section	.text.Set_Speed,"ax",%progbits
  21              		.align	1
  22              		.global	Set_Speed
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	Set_Speed:
  28              	.LVL0:
  29              	.LFB130:
   1:Core/Src/motor_driver.c **** #include <motot_driver.h>
   2:Core/Src/motor_driver.c **** 
   3:Core/Src/motor_driver.c **** 
   4:Core/Src/motor_driver.c **** 
   5:Core/Src/motor_driver.c **** float Set_Speed(float rpm)
   6:Core/Src/motor_driver.c **** {
  30              		.loc 1 6 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 16
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              		.loc 1 6 1 is_stmt 0 view .LVU1
  36 0000 84B0     		sub	sp, sp, #16
  37              	.LCFI0:
  38              		.cfi_def_cfa_offset 16
   7:Core/Src/motor_driver.c ****     Parameters param;
  39              		.loc 1 7 5 is_stmt 1 view .LVU2
   8:Core/Src/motor_driver.c ****     param.FCPU = 180000000;
  40              		.loc 1 8 5 view .LVU3
  41              		.loc 1 8 16 is_stmt 0 view .LVU4
  42 0002 074B     		ldr	r3, .L3
  43 0004 0093     		str	r3, [sp]	@ float
   9:Core/Src/motor_driver.c ****     param.maxFreq = 500000;
  44              		.loc 1 9 5 is_stmt 1 view .LVU5
  45              		.loc 1 9 19 is_stmt 0 view .LVU6
  46 0006 074B     		ldr	r3, .L3+4
  47 0008 0193     		str	r3, [sp, #4]	@ float
  10:Core/Src/motor_driver.c ****     param.rpsMax = 50;
  48              		.loc 1 10 5 is_stmt 1 view .LVU7
ARM GAS  C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s 			page 2


  49              		.loc 1 10 18 is_stmt 0 view .LVU8
  50 000a 074B     		ldr	r3, .L3+8
  51 000c 0293     		str	r3, [sp, #8]	@ float
  11:Core/Src/motor_driver.c ****     param.coef = (param.FCPU * param.rpsMax * 60) / param.maxFreq;
  52              		.loc 1 11 5 is_stmt 1 view .LVU9
  53              		.loc 1 11 16 is_stmt 0 view .LVU10
  54 000e DFED077A 		vldr.32	s15, .L3+12
  55 0012 CDED037A 		vstr.32	s15, [sp, #12]
  12:Core/Src/motor_driver.c **** 
  13:Core/Src/motor_driver.c ****     return param.coef / rpm;
  56              		.loc 1 13 5 is_stmt 1 view .LVU11
  14:Core/Src/motor_driver.c ****     // Soft_Start(rpm);
  15:Core/Src/motor_driver.c ****     // return param.FCPU / ((param.maxFreq * ((float)(rpm) / 60.0)) / param.rpsMax);
  16:Core/Src/motor_driver.c **** }
  57              		.loc 1 16 1 is_stmt 0 view .LVU12
  58 0016 87EE800A 		vdiv.f32	s0, s15, s0
  59              	.LVL1:
  60              		.loc 1 16 1 view .LVU13
  61 001a 04B0     		add	sp, sp, #16
  62              	.LCFI1:
  63              		.cfi_def_cfa_offset 0
  64              		@ sp needed
  65 001c 7047     		bx	lr
  66              	.L4:
  67 001e 00BF     		.align	2
  68              	.L3:
  69 0020 50A92B4D 		.word	1294707024
  70 0024 0024F448 		.word	1223959552
  71 0028 00004842 		.word	1112014848
  72 002c FFD58349 		.word	1233376767
  73              		.cfi_endproc
  74              	.LFE130:
  76              		.section	.text.Soft_Start,"ax",%progbits
  77              		.align	1
  78              		.global	Soft_Start
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  83              	Soft_Start:
  84              	.LVL2:
  85              	.LFB131:
  17:Core/Src/motor_driver.c **** 
  18:Core/Src/motor_driver.c **** int previousValue = 0;
  19:Core/Src/motor_driver.c **** uint8_t steps = 52, divStep;
  20:Core/Src/motor_driver.c **** volatile uint16_t setSpeed;
  21:Core/Src/motor_driver.c **** 
  22:Core/Src/motor_driver.c **** void Soft_Start(int speed)
  23:Core/Src/motor_driver.c **** {
  86              		.loc 1 23 1 is_stmt 1 view -0
  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              		.loc 1 23 1 is_stmt 0 view .LVU15
  91 0000 38B5     		push	{r3, r4, r5, lr}
  92              	.LCFI2:
  93              		.cfi_def_cfa_offset 16
  94              		.cfi_offset 3, -16
ARM GAS  C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s 			page 3


  95              		.cfi_offset 4, -12
  96              		.cfi_offset 5, -8
  97              		.cfi_offset 14, -4
  98 0002 0546     		mov	r5, r0
  24:Core/Src/motor_driver.c ****     if (speed >= previousValue + steps)
  99              		.loc 1 24 5 is_stmt 1 view .LVU16
 100              		.loc 1 24 32 is_stmt 0 view .LVU17
 101 0004 1C4B     		ldr	r3, .L10
 102 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 103 0008 1C4B     		ldr	r3, .L10+4
 104 000a 1B68     		ldr	r3, [r3]
 105 000c 1344     		add	r3, r3, r2
 106              		.loc 1 24 8 view .LVU18
 107 000e 8342     		cmp	r3, r0
 108 0010 23DC     		bgt	.L6
  25:Core/Src/motor_driver.c ****     {
  26:Core/Src/motor_driver.c ****         divStep = speed / steps;
 109              		.loc 1 26 9 is_stmt 1 view .LVU19
 110              		.loc 1 26 25 is_stmt 0 view .LVU20
 111 0012 90FBF2F2 		sdiv	r2, r0, r2
 112              		.loc 1 26 17 view .LVU21
 113 0016 1A4B     		ldr	r3, .L10+8
 114 0018 1A70     		strb	r2, [r3]
  27:Core/Src/motor_driver.c ****         for (uint8_t i = 0; i < divStep; i++)
 115              		.loc 1 27 9 is_stmt 1 view .LVU22
 116              	.LBB2:
 117              		.loc 1 27 14 view .LVU23
 118              	.LVL3:
 119              		.loc 1 27 22 is_stmt 0 view .LVU24
 120 001a 0024     		movs	r4, #0
 121              		.loc 1 27 9 view .LVU25
 122 001c 19E0     		b	.L7
 123              	.LVL4:
 124              	.L8:
  28:Core/Src/motor_driver.c ****         {
  29:Core/Src/motor_driver.c ****             delay(100);
 125              		.loc 1 29 13 is_stmt 1 view .LVU26
 126 001e 6420     		movs	r0, #100
 127 0020 FFF7FEFF 		bl	delay
 128              	.LVL5:
  30:Core/Src/motor_driver.c ****             setSpeed += steps;
 129              		.loc 1 30 13 view .LVU27
 130              		.loc 1 30 22 is_stmt 0 view .LVU28
 131 0024 174A     		ldr	r2, .L10+12
 132 0026 1388     		ldrh	r3, [r2]
 133 0028 1349     		ldr	r1, .L10
 134 002a 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 135 002c 11FA83F3 		uxtah	r3, r1, r3
 136 0030 9BB2     		uxth	r3, r3
 137 0032 1380     		strh	r3, [r2]	@ movhi
  31:Core/Src/motor_driver.c ****             TIM3->ARR = Set_Speed(setSpeed);
 138              		.loc 1 31 13 is_stmt 1 view .LVU29
 139              		.loc 1 31 25 is_stmt 0 view .LVU30
 140 0034 1388     		ldrh	r3, [r2]
 141 0036 9BB2     		uxth	r3, r3
 142 0038 00EE103A 		vmov	s0, r3	@ int
 143 003c B8EE400A 		vcvt.f32.u32	s0, s0
ARM GAS  C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s 			page 4


 144 0040 FFF7FEFF 		bl	Set_Speed
 145              	.LVL6:
 146              		.loc 1 31 23 discriminator 1 view .LVU31
 147 0044 BCEEC00A 		vcvt.u32.f32	s0, s0
 148 0048 0F4B     		ldr	r3, .L10+16
 149 004a 83ED0B0A 		vstr.32	s0, [r3, #44]	@ int
  27:Core/Src/motor_driver.c ****         {
 150              		.loc 1 27 43 is_stmt 1 discriminator 3 view .LVU32
 151 004e 0134     		adds	r4, r4, #1
 152              	.LVL7:
  27:Core/Src/motor_driver.c ****         {
 153              		.loc 1 27 43 is_stmt 0 discriminator 3 view .LVU33
 154 0050 E4B2     		uxtb	r4, r4
 155              	.LVL8:
 156              	.L7:
  27:Core/Src/motor_driver.c ****         {
 157              		.loc 1 27 31 is_stmt 1 discriminator 1 view .LVU34
 158 0052 0B4B     		ldr	r3, .L10+8
 159 0054 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 160 0056 A342     		cmp	r3, r4
 161 0058 E1D8     		bhi	.L8
 162              	.LVL9:
 163              	.L6:
  27:Core/Src/motor_driver.c ****         {
 164              		.loc 1 27 31 is_stmt 0 discriminator 1 view .LVU35
 165              	.LBE2:
  32:Core/Src/motor_driver.c ****         }
  33:Core/Src/motor_driver.c ****         // setSpeed = 0;
  34:Core/Src/motor_driver.c ****     }
  35:Core/Src/motor_driver.c ****     else if(speed < previousValue){
  36:Core/Src/motor_driver.c **** 
  37:Core/Src/motor_driver.c ****     }
 166              		.loc 1 37 5 is_stmt 1 view .LVU36
  38:Core/Src/motor_driver.c ****     TIM3->ARR = Set_Speed(speed);
 167              		.loc 1 38 5 view .LVU37
 168              		.loc 1 38 17 is_stmt 0 view .LVU38
 169 005a 07EE905A 		vmov	s15, r5	@ int
 170 005e B8EEE70A 		vcvt.f32.s32	s0, s15
 171 0062 FFF7FEFF 		bl	Set_Speed
 172              	.LVL10:
 173              		.loc 1 38 15 discriminator 1 view .LVU39
 174 0066 BCEEC00A 		vcvt.u32.f32	s0, s0
 175 006a 074B     		ldr	r3, .L10+16
 176 006c 83ED0B0A 		vstr.32	s0, [r3, #44]	@ int
  39:Core/Src/motor_driver.c ****     previousValue = speed;
 177              		.loc 1 39 5 is_stmt 1 view .LVU40
 178              		.loc 1 39 19 is_stmt 0 view .LVU41
 179 0070 024B     		ldr	r3, .L10+4
 180 0072 1D60     		str	r5, [r3]
  40:Core/Src/motor_driver.c **** }...
 181              		.loc 1 40 1 view .LVU42
 182 0074 38BD     		pop	{r3, r4, r5, pc}
 183              	.LVL11:
 184              	.L11:
 185              		.loc 1 40 1 view .LVU43
 186 0076 00BF     		.align	2
 187              	.L10:
ARM GAS  C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s 			page 5


 188 0078 00000000 		.word	steps
 189 007c 00000000 		.word	previousValue
 190 0080 00000000 		.word	divStep
 191 0084 00000000 		.word	setSpeed
 192 0088 00040040 		.word	1073742848
 193              		.cfi_endproc
 194              	.LFE131:
 196              		.global	setSpeed
 197              		.section	.bss.setSpeed,"aw",%nobits
 198              		.align	1
 201              	setSpeed:
 202 0000 0000     		.space	2
 203              		.global	divStep
 204              		.section	.bss.divStep,"aw",%nobits
 207              	divStep:
 208 0000 00       		.space	1
 209              		.global	steps
 210              		.section	.data.steps,"aw"
 213              	steps:
 214 0000 34       		.byte	52
 215              		.global	previousValue
 216              		.section	.bss.previousValue,"aw",%nobits
 217              		.align	2
 220              	previousValue:
 221 0000 00000000 		.space	4
 222              		.text
 223              	.Letext0:
 224              		.file 2 "C:/Users/Asus/scoop/apps/gcc-arm-none-eabi/current/arm-none-eabi/include/machine/_default
 225              		.file 3 "C:/Users/Asus/scoop/apps/gcc-arm-none-eabi/current/arm-none-eabi/include/sys/_stdint.h"
 226              		.file 4 "D:/Holography/CMSIS/Devices/stm32f429xx.h"
 227              		.file 5 "Core/Inc/motot_driver.h"
 228              		.file 6 "Core/Inc/interrupt.h"
ARM GAS  C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s 			page 6


DEFINED SYMBOLS
                            *ABS*:00000000 motor_driver.c
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:21     .text.Set_Speed:00000000 $t
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:27     .text.Set_Speed:00000000 Set_Speed
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:69     .text.Set_Speed:00000020 $d
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:77     .text.Soft_Start:00000000 $t
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:83     .text.Soft_Start:00000000 Soft_Start
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:188    .text.Soft_Start:00000078 $d
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:213    .data.steps:00000000 steps
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:220    .bss.previousValue:00000000 previousValue
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:207    .bss.divStep:00000000 divStep
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:201    .bss.setSpeed:00000000 setSpeed
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:198    .bss.setSpeed:00000000 $d
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:208    .bss.divStep:00000000 $d
C:\Users\Asus\AppData\Local\Temp\ccfIdbay.s:217    .bss.previousValue:00000000 $d

UNDEFINED SYMBOLS
delay
